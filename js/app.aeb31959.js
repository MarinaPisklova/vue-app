(function(){"use strict";var t={1017:function(t,e,a){var r=a(9242),o=a(3396);const s={class:"header"},l={class:"header__wrapper container"},c={class:"header__logo",href:"#"},i=["src"],n=(0,o._)("a",{class:"header__tel",href:"tel:8 800 600 90 09"}," 8 800 600 90 09 ",-1),d=(0,o.uE)('<footer class="footer"><div class="footer__wrapper container"><ul class="footer__links"><li><a class="footer__link" href="#"> Каталог </a></li><li><a class="footer__link" href="tel:88006009009"> 8 800 600 90 09 </a></li><li><a class="footer__link" href="mailto:hi@technozavrrr.com"> hi@technozavrrr.com </a></li><li><a class="footer__link" href="#"> Распродажа </a></li><li><a class="footer__link footer__link--medium" href="#"> Заказать звонок </a></li></ul><ul class="footer__social social"><li class="social__item"><a class="social__link" href="#" aria-label="Вконтакте"><svg width="20" height="11" fill="currentColor"><use xlink:href="#icon-vk"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Инстаграм"><svg width="17" height="17" fill="currentColor"><use xlink:href="#icon-insta"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Facebook"><svg width="17" height="17" fill="currentColor"><use xlink:href="#icon-facebook"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Twitter"><svg width="17" height="14" fill="currentColor"><use xlink:href="#icon-twitter"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Telegram"><svg width="19" height="17" fill="currentColor"><use xlink:href="#icon-telegram"></use></svg></a></li></ul><p class="footer__desc"> Все права на материалы, находящиеся на сайте, охраняются в соответствии с законодательством РФ, в том числе об авторском праве и смежных правах. </p><ul class="footer__data"><li><a class="footer__link" href="#" target="_blank" rel="noopener" type="application/pdf"> Политика конфиденциальности </a></li><li><a class="footer__link" href="#" target="_blank" rel="noopener" type="application/pdf"> Публичная оферта </a></li></ul><span class="footer__copyright"> © 2020 Технозавррр </span></div></footer>',1);function u(t,e,a,r,u,_){const p=(0,o.up)("router-link"),m=(0,o.up)("cart-indicator"),h=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("header",s,[(0,o._)("div",l,[(0,o.Wm)(p,{class:"header__info",to:{name:"main"}},{default:(0,o.w5)((()=>[(0,o.Uk)("Каталог")])),_:1}),(0,o._)("a",c,[(0,o._)("img",{src:`${u.publicPath}/img/svg/logo-tech.svg`,alt:"Логотип интернет магазина Технозавррр",width:"190",height:"33"},null,8,i)]),n,(0,o.Wm)(m)])]),(0,o.Wm)(h),d])}var _=a(7139);const p=(0,o._)("svg",{width:"30",height:"21",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"#icon-cart"})],-1),m={key:0,class:"small-loader"},h={key:1,class:"header__count","aria-label":"Количество товаров"};function f(t,e,a,r,s,l){const c=(0,o.up)("router-link");return(0,o.wg)(),(0,o.j4)(c,{class:"header__cart",to:{name:"cart"},"aria-label":"Корзина с товарами"},{default:(0,o.w5)((()=>[p,t.$store.state.cartProductsLoading?((0,o.wg)(),(0,o.iD)("div",m)):((0,o.wg)(),(0,o.iD)("span",h,(0,_.zw)(t.$store.state.cartProducts.length),1))])),_:1})}var g={},b=a(89);const v=(0,b.Z)(g,[["render",f]]);var k=v,y=a(65),P={data(){return{publicPath:"/vue-app/"}},components:{CartIndicator:k},methods:{...(0,y.nv)(["loadCart"]),...(0,y.OI)(["updateUserAccessKey"])},created(){const t=localStorage.getItem("userAccessKey");t&&this.updateUserAccessKey({accessKey:t}),this.loadCart()}};const w=(0,b.Z)(P,[["render",u]]);var D=w,C=a(2483);function I(t,e,a,r,s,l){return(0,o.wg)(),(0,o.iD)("h1",null,"Страница не найдена")}var A={};const z=(0,b.Z)(A,[["render",I]]);var U=z;const $={key:0},V={key:1,class:"loader"},T={key:2,class:"content container"},x={class:"content__top"},L={class:"breadcrumbs"},F={class:"breadcrumbs__item"},K={class:"breadcrumbs__item"},W={class:"breadcrumbs__item"},Z={class:"breadcrumbs__link"},E={class:"item"},M={class:"item__pics pics"},O={class:"pics__wrapper"},S=["src","alt"],j={class:"item__info"},q={class:"item__code"},B={class:"item__title"},Y={class:"item__form"},H={class:"item__price"},G={class:"form__block"},N=(0,o._)("legend",{class:"form__legend"},"Цвет:",-1),Q={class:"colors"},R=["for"],X=["id","value"],J=(0,o.uE)('<fieldset class="form__block"><legend class="form__legend">Объемб в ГБ:</legend><ul class="sizes sizes--primery"><li class="sizes__item"><label class="sizes__label"><input class="sizes__radio sr-only" type="radio" name="sizes-item" value="32"><span class="sizes__value"> 32gb </span></label></li><li class="sizes__item"><label class="sizes__label"><input class="sizes__radio sr-only" type="radio" name="sizes-item" value="64"><span class="sizes__value"> 64gb </span></label></li><li class="sizes__item"><label class="sizes__label"><input class="sizes__radio sr-only" type="radio" name="sizes-item" value="128" checked=""><span class="sizes__value"> 128gb </span></label></li></ul></fieldset>',1),tt={class:"item__row"},et={class:"form__counter"},at=(0,o._)("svg",{width:"12",height:"12",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"#icon-minus"})],-1),rt=[at],ot=(0,o._)("svg",{width:"12",height:"12",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"#icon-plus"})],-1),st=[ot],lt=["disabled"],ct=(0,o.uE)('<div class="item__desc"><ul class="tabs"><li class="tabs__item"><a class="tabs__link tabs__link--current"> Описание </a></li><li class="tabs__item"><a class="tabs__link" href="#"> Характеристики </a></li><li class="tabs__item"><a class="tabs__link" href="#"> Гарантия </a></li><li class="tabs__item"><a class="tabs__link" href="#"> Оплата и доставка </a></li></ul><div class="item__content"><p> Навигация GPS, ГЛОНАСС, BEIDOU Galileo и QZSS<br> Синхронизация со смартфоном<br> Связь по Bluetooth Smart, ANT+ и Wi-Fi<br> Поддержка сторонних приложений<br></p><a href="#"> Все характеристики </a><h3>Что это?</h3><p> Wahoo ELEMNT BOLT GPS – это велокомпьютер, который позволяет оптимизировать свои велотренировки, сделав их максимально эффективными. Wahoo ELEMNT BOLT GPS синхронизируется с датчиками по ANT+, объединяя полученную с них информацию. Данные отображаются на дисплее, а также сохраняются на смартфоне. При этом на мобильное устройство можно установить как фирменное приложение, так и различные приложения сторонних разработчиков. Велокомпьютер точно отслеживает местоположение, принимая сигнал с целого комплекса спутников. Эта информация позволяет смотреть уже преодоленные маршруты и планировать новые велопрогулки. </p><h3>Дизайн</h3><p> Велокомпьютер Wahoo ELEMNT BOLT очень компактный. Размеры устройства составляют всего 74,6 x 47,3 x 22,1 мм. что не превышает габариты смартфона. Корпус гаджета выполнен из черного пластика. На обращенной к пользователю стороне расположен дисплей диагональю 56 мм. На дисплей выводятся координаты и скорость, а также полученная со смартфона и синхронизированных датчиков информация: интенсивность, скорость вращения педалей, пульс и т.д. (датчики не входят в комплект поставки). Корпус велокомпьютера имеет степень защиты от влаги IPX7. Это означает, что устройство не боится пыли, а также выдерживает кратковременное (до 30 минут) погружение в воду на глубину не более 1 метра. </p></div></div>',1);function it(t,e,a,s,l,c){const i=(0,o.up)("router-link");return l.productLoadingFailed?((0,o.wg)(),(0,o.iD)("div",$,[(0,o.Uk)(" Произошла ошибка "),(0,o._)("button",{onClick:e[0]||(e[0]=(0,r.iM)(((...t)=>c.loadProduct&&c.loadProduct(...t)),["prevent"]))},"Попробать снова")])):l.productLoading?((0,o.wg)(),(0,o.iD)("div",V,"Загрузка товара...")):((0,o.wg)(),(0,o.iD)("main",T,[(0,o._)("div",x,[(0,o._)("ul",L,[(0,o._)("li",F,[(0,o.Wm)(i,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" Каталог ")])),_:1})]),(0,o._)("li",K,[(0,o.Wm)(i,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,o.w5)((()=>[(0,o.Uk)((0,_.zw)(c.category.title),1)])),_:1})]),(0,o._)("li",W,[(0,o._)("a",Z,(0,_.zw)(c.product.title),1)])])]),(0,o._)("section",E,[(0,o._)("div",M,[(0,o._)("div",O,[(0,o._)("img",{width:"570",height:"570",src:c.product.image,alt:c.product.title},null,8,S)])]),(0,o._)("div",j,[(0,o._)("span",q,"Артикул: "+(0,_.zw)(c.product.id),1),(0,o._)("h2",B,(0,_.zw)(c.product.title),1),(0,o._)("div",Y,[(0,o._)("form",{class:"form",action:"#",method:"POST",onSubmit:e[5]||(e[5]=(0,r.iM)(((...t)=>c.addToCart&&c.addToCart(...t)),["prevent"]))},[(0,o._)("b",H,(0,_.zw)(c.formatProductPrice)+" ₽ ",1),(0,o._)("fieldset",G,[N,(0,o._)("ul",Q,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(c.product.colors,(t=>((0,o.wg)(),(0,o.iD)("li",{class:"colors__item",key:t.id},[(0,o._)("label",{class:"colors__label",for:"item"+c.product.id+"color"+t.id},[(0,o.wy)((0,o._)("input",{id:"item"+c.product.id+"color"+t.id,class:"colors__radio sr-only",type:"radio",name:"color-item",value:t.id,checked:"","onUpdate:modelValue":e[1]||(e[1]=t=>l.selectedColorId=t)},null,8,X),[[r.G2,l.selectedColorId]]),(0,o._)("span",{class:"colors__value",style:(0,_.j5)({backgroundColor:t.code})},null,4)],8,R)])))),128))])]),J,(0,o._)("div",tt,[(0,o._)("div",et,[(0,o._)("button",{type:"button","aria-label":"Убрать один товар",onClick:e[2]||(e[2]=(0,r.iM)(((...t)=>c.decrementAmount&&c.decrementAmount(...t)),["prevent"]))},rt),(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>l.productAmount=t)},null,512),[[r.nr,l.productAmount,void 0,{number:!0}]]),(0,o._)("button",{type:"button","aria-label":"Добавить один товар",onClick:e[4]||(e[4]=(0,r.iM)(((...t)=>c.incrementAmount&&c.incrementAmount(...t)),["prevent"]))},st)]),(0,o._)("button",{class:"button button--primery",type:"submit",disabled:l.productAddSending}," В корзину ",8,lt)]),(0,o.wy)((0,o._)("div",null,"Товар добавлен в корзину",512),[[r.F8,l.productAdded]]),(0,o.wy)((0,o._)("div",null,"Добавляем товар в корзину...",512),[[r.F8,l.productAddSending]])],32)])]),ct])]))}var nt=a(1373),dt=(0,nt.Z)();function ut(t,e){dt.emit("gotoPage",{pageName:t,pageParams:e})}function _t(t){return(new Intl.NumberFormat).format(t)}var pt=a(6943);const mt="https://vue-study.skillbox.cc";var ht=mt,ft={data(){return{selectedColorId:0,productAmount:1,productData:null,productLoading:!1,productLoadingFailed:!1,productAdded:!1,productAddSending:!1}},computed:{product(){return{...this.productData,image:this.productData.image.file.url}},category(){return this.productData.category},formatProductPrice(){return _t(this.product.price)}},methods:{incrementAmount(){this.productAmount++},decrementAmount(){1!==this.productAmount&&this.productAmount--},gotoPage:ut,addToCart(){this.productAdded=!1,this.productAddSending=!0,this.addProductToCart({productId:this.product.id,amount:this.productAmount}).then((()=>{this.productAdded=!0,this.productAddSending=!1}))},loadProduct(){this.productLoading=!0,this.productLoadingFailed=!1,pt.Z.get(`${ht}/api/products/${this.$route.params.id}`).then((t=>{this.productData=t.data})).catch((()=>{this.productLoadingFailed=!0})).then((()=>{this.productLoading=!1}))},...(0,y.nv)(["addProductToCart"])},watch:{"$route.params.id":{handler(){this.loadProduct()},immediate:!0}}};const gt=(0,b.Z)(ft,[["render",it]]);var bt=gt;const vt={class:"content container"},kt={class:"content__top content__top--catalog"},yt=(0,o._)("h1",{class:"content__title"},"Каталог",-1),Pt={class:"content__info"},wt={class:"content__catalog"},Dt={class:"catalog"},Ct={key:0},It={key:1,class:"loader"};function At(t,e,a,s,l,c){const i=(0,o.up)("ProductFilter"),n=(0,o.up)("ProductList"),d=(0,o.up)("BasePagination");return(0,o.wg)(),(0,o.iD)("main",vt,[(0,o._)("div",kt,[yt,(0,o._)("span",Pt,(0,_.zw)(c.countProducts)+" товара ",1)]),(0,o._)("div",wt,[(0,o.Wm)(i,{"category-id":l.filterCategoryId,"onUpdate:category-id":e[0]||(e[0]=t=>l.filterCategoryId=t),"price-from":l.filterPriceFrom,"onUpdate:price-from":e[1]||(e[1]=t=>l.filterPriceFrom=t),"price-to":l.filterPriceTo,"onUpdate:price-to":e[2]||(e[2]=t=>l.filterPriceTo=t),"color-id":l.filterColorId,"onUpdate:color-id":e[3]||(e[3]=t=>l.filterColorId=t)},null,8,["category-id","price-from","price-to","color-id"]),(0,o._)("section",Dt,[l.productsLoadingFailed?((0,o.wg)(),(0,o.iD)("div",Ct,[(0,o.Uk)("Произошела ошибка "),(0,o._)("button",{onClick:e[4]||(e[4]=(0,r.iM)(((...t)=>c.loadProducts&&c.loadProducts(...t)),["prevent"]))},"Попробать снова")])):(0,o.kq)("",!0),l.productsLoading?((0,o.wg)(),(0,o.iD)("div",It,"Загрузка товаров...")):(0,o.kq)("",!0),(0,o.Wm)(n,{products:c.products},null,8,["products"]),(0,o.Wm)(d,{page:l.page,"onUpdate:page":e[5]||(e[5]=t=>l.page=t),count:c.countProducts,"per-page":l.productsPerPage},null,8,["page","count","per-page"])])])])}const zt={class:"catalog__list"};function Ut(t,e,a,r,s,l){const c=(0,o.up)("ProductItem");return(0,o.wg)(),(0,o.iD)("ul",zt,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.products,(t=>((0,o.wg)(),(0,o.j4)(c,{product:t,key:t.id},null,8,["product"])))),128))])}const $t={class:"catalog__item"},Vt=["src","alt"],Tt={class:"catalog__title"},xt={key:0,href:"#"},Lt={key:0,class:"catalog__price"},Ft={class:"colors colors--black"},Kt=["for"],Wt=["id","value"];function Zt(t,e,a,s,l,c){const i=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("li",$t,[(0,o.Wm)(i,{class:"catalog__pic",href:"#",to:{name:"product",params:{id:a.product.id}}},{default:(0,o.w5)((()=>[(0,o._)("img",{src:a.product.image,alt:a.product.title},null,8,Vt)])),_:1},8,["to"]),(0,o._)("h3",Tt,[a.product?((0,o.wg)(),(0,o.iD)("a",xt,(0,_.zw)(a.product.title),1)):(0,o.kq)("",!0)]),a.product?((0,o.wg)(),(0,o.iD)("span",Lt,(0,_.zw)(c.formatProductPrice)+" ₽ ",1)):(0,o.kq)("",!0),(0,o._)("ul",Ft,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.product.colors,(t=>((0,o.wg)(),(0,o.iD)("li",{key:t.id},[(0,o._)("label",{for:"item"+a.product.id+"color"+t.id,class:"colors__label"},[(0,o.wy)((0,o._)("input",{id:"item"+a.product.id+"color"+t.id,class:"colors__radio sr-only",type:"radio",value:t.id,"onUpdate:modelValue":e[0]||(e[0]=t=>l.selectedColorId=t)},null,8,Wt),[[r.G2,l.selectedColorId]]),(0,o._)("span",{class:"colors__value",style:(0,_.j5)({backgroundColor:t.code})},null,4)],8,Kt)])))),128))])])}var Et={data(){return{selectedColorId:0}},props:["product"],computed:{formatProductPrice(){return _t(this.product.price)}},methods:{gotoPage:ut}};const Mt=(0,b.Z)(Et,[["render",Zt]]);var Ot=Mt,St={components:{ProductItem:Ot},props:["products"]};const jt=(0,b.Z)(St,[["render",Ut]]);var qt=jt;const Bt={class:"catalog__pagination pagination"},Yt={class:"pagination__item"},Ht=(0,o._)("svg",{width:"8",height:"14",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"#icon-arrow-left"})],-1),Gt=[Ht],Nt=["onClick"],Qt={class:"pagination__item"},Rt=(0,o._)("svg",{width:"8",height:"14",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"#icon-arrow-right"})],-1),Xt=[Rt];function Jt(t,e,a,s,l,c){return(0,o.wg)(),(0,o.iD)("ul",Bt,[(0,o._)("li",Yt,[(0,o._)("a",{class:(0,_.C_)(["pagination__link pagination__link--arrow",{"pagination__link--disabled":1===a.page}]),href:"#","aria-label":"Предыдущая страница",onClick:e[0]||(e[0]=(0,r.iM)((t=>c.prevPage(a.page)),["prevent"]))},Gt,2)]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(c.pages,(t=>((0,o.wg)(),(0,o.iD)("li",{class:"pagination__item",key:t},[(0,o._)("a",{href:"#",class:(0,_.C_)(["pagination__link",{"pagination__link--current":t===a.page}]),onClick:(0,r.iM)((e=>c.paginate(t)),["prevent"])},(0,_.zw)(t),11,Nt)])))),128)),(0,o._)("li",Qt,[(0,o._)("a",{class:(0,_.C_)(["pagination__link pagination__link--arrow",{"pagination__link--disabled":a.page===c.pages}]),href:"#","aria-label":"Следующая страница",onClick:e[1]||(e[1]=(0,r.iM)((t=>c.nextPage(a.page)),["prevent"]))},Xt,2)])])}var te={props:["page","count","perPage"],computed:{pages(){return Math.ceil(this.count/this.perPage)}},methods:{paginate(t){this.$emit("update:page",t)},nextPage(t){t<this.pages&&this.$emit("update:page",t+1)},prevPage(t){t>1&&this.$emit("update:page",t-1)}}};const ee=(0,b.Z)(te,[["render",Jt]]);var ae=ee;const re={class:"filter"},oe=(0,o._)("h2",{class:"filter__title"},"Фильтры",-1),se={class:"form__block"},le=(0,o._)("legend",{class:"form__legend"},"Цена",-1),ce={class:"form__label form__label--price"},ie=(0,o._)("span",{class:"form__value"},"От",-1),ne={class:"form__label form__label--price"},de=(0,o._)("span",{class:"form__value"},"До",-1),ue={class:"form__block"},_e=(0,o._)("legend",{class:"form__legend"},"Категория",-1),pe={class:"form__label form__label--select"},me=(0,o._)("option",{value:"0"},"Все категории",-1),he=["value"],fe={class:"form__block"},ge=(0,o._)("legend",{class:"form__legend"},"Цвет",-1),be={class:"colors"},ve=["for"],ke=["id","value"],ye=(0,o.uE)('<fieldset class="form__block"><legend class="form__legend">Объемб в ГБ</legend><ul class="check-list"><li class="check-list__item"><label class="check-list__label"><input class="check-list__check sr-only" type="checkbox" name="volume" value="8" checked=""><span class="check-list__desc"> 8 <span>(313)</span></span></label></li><li class="check-list__item"><label class="check-list__label"><input class="check-list__check sr-only" type="checkbox" name="volume" value="16"><span class="check-list__desc"> 16 <span>(461)</span></span></label></li><li class="check-list__item"><label class="check-list__label"><input class="check-list__check sr-only" type="checkbox" name="volume" value="32"><span class="check-list__desc"> 32 <span>(313)</span></span></label></li><li class="check-list__item"><label class="check-list__label"><input class="check-list__check sr-only" type="checkbox" name="volume" value="64"><span class="check-list__desc"> 64 <span>(313)</span></span></label></li><li class="check-list__item"><label class="check-list__label"><input class="check-list__check sr-only" type="checkbox" name="volume" value="128"><span class="check-list__desc"> 128 <span>(313)</span></span></label></li><li class="check-list__item"><label class="check-list__label"><input class="check-list__check sr-only" type="checkbox" name="volume" value="264"><span class="check-list__desc"> 264 <span>(313)</span></span></label></li></ul></fieldset><button class="filter__submit button button--primery" type="submit"> Применить </button>',2);function Pe(t,e,a,s,l,c){return(0,o.wg)(),(0,o.iD)("aside",re,[oe,(0,o._)("form",{class:"filter__form form",action:"#",method:"get",onSubmit:e[5]||(e[5]=(0,r.iM)(((...t)=>c.submit&&c.submit(...t)),["prevent"]))},[(0,o._)("fieldset",se,[le,(0,o._)("label",ce,[(0,o.wy)((0,o._)("input",{class:"form__input",type:"text",name:"min-price","onUpdate:modelValue":e[0]||(e[0]=t=>l.currentPriceFrom=t)},null,512),[[r.nr,l.currentPriceFrom,void 0,{number:!0}]]),ie]),(0,o._)("label",ne,[(0,o.wy)((0,o._)("input",{class:"form__input",type:"text",name:"max-price","onUpdate:modelValue":e[1]||(e[1]=t=>l.currentPriceTo=t)},null,512),[[r.nr,l.currentPriceTo,void 0,{number:!0}]]),de])]),(0,o._)("fieldset",ue,[_e,(0,o._)("label",pe,[(0,o.wy)((0,o._)("select",{class:"form__select",type:"text",name:"category","onUpdate:modelValue":e[2]||(e[2]=t=>l.currentCategoryId=t)},[me,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(c.categories,(t=>((0,o.wg)(),(0,o.iD)("option",{value:t.id,key:t.id},(0,_.zw)(t.title),9,he)))),128))],512),[[r.bM,l.currentCategoryId,void 0,{number:!0}]])])]),(0,o._)("fieldset",fe,[ge,(0,o._)("ul",be,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(c.colors,(t=>((0,o.wg)(),(0,o.iD)("li",{class:"colors__item",key:t.id},[(0,o._)("label",{class:"colors__label",for:t.id},[(0,o.wy)((0,o._)("input",{id:t.id,class:"colors__radio sr-only",type:"radio",name:"color",value:t.id,"onUpdate:modelValue":e[3]||(e[3]=t=>l.currentColorId=t)},null,8,ke),[[r.G2,l.currentColorId,void 0,{number:!0}]]),(0,o._)("span",{class:"colors__value",style:(0,_.j5)({backgroundColor:t.code})},null,4)],8,ve)])))),128))])]),ye,(0,o._)("button",{class:"filter__reset button button--second",type:"button",onClick:e[4]||(e[4]=(0,r.iM)(((...t)=>c.reset&&c.reset(...t)),["prevent"]))}," Сбросить ")],32)])}var we={data(){return{currentPriceFrom:0,currentPriceTo:0,currentCategoryId:0,currentColorId:0,categoriesData:null,colorsData:null}},props:["priceFrom","priceTo","categoryId","colorId"],computed:{categories(){return this.categoriesData?this.categoriesData.items:[]},colors(){return this.colorsData?this.colorsData.items:[]}},watch:{priceFrom(t){this.currentPriceFrom=t},priceTo(t){this.currentPriceTo=t},categoryId(t){this.currentCategoryId=t},colorId(t){this.currentColorId=t}},methods:{submit(){this.$emit("update:priceFrom",this.currentPriceFrom),this.$emit("update:priceTo",this.currentPriceTo),this.$emit("update:categoryId",this.currentCategoryId),this.$emit("update:colorId",this.currentColorId)},reset(){this.$emit("update:priceFrom",0),this.$emit("update:priceTo",0),this.$emit("update:categoryId",0),this.$emit("update:colorId",0)},loadCategories(){pt.Z.get(`${ht}/api/productCategories`).then((t=>{this.categoriesData=t.data}))},loadColors(){pt.Z.get(`${ht}/api/colors`).then((t=>{this.colorsData=t.data}))}},created(){this.loadCategories(),this.loadColors()}};const De=(0,b.Z)(we,[["render",Pe]]);var Ce=De,Ie={components:{ProductList:qt,BasePagination:ae,ProductFilter:Ce},data(){return{filterPriceFrom:0,filterPriceTo:0,filterCategoryId:0,filterColorId:0,page:1,productsPerPage:3,productsData:null,productsLoading:!1,productsLoadingFailed:!1}},watch:{page(){this.loadProducts()},filterPriceFrom(){this.loadProducts()},filterPriceTo(){this.loadProducts()},filterCategoryId(){this.loadProducts()},filterColorId(){this.loadProducts()}},computed:{products(){return this.productsData?this.productsData.items.map((t=>({...t,image:t.image.file.url}))):[]},countProducts(){return this.productsData?this.productsData.pagination.total:0}},methods:{loadProducts(){this.productsLoading=!0,this.productsLoadingFailed=!1,this.productsData=null,clearTimeout(this.loadProductsTimer),this.loadProductsTimer=setTimeout((()=>{pt.Z.get(`${ht}/api/products`,{params:{page:this.page,limit:this.productsPerPage,categoryId:this.filterCategoryId,colorId:this.filterColorId,minPrice:this.filterPriceFrom,maxPrice:this.filterPriceTo}}).then((t=>{this.productsData=t.data})).catch((()=>{this.productsLoadingFailed=!0})).then((()=>{this.productsLoading=!1}))}),1e3)}},created(){this.loadProducts()}};const Ae=(0,b.Z)(Ie,[["render",At]]);var ze=Ae;const Ue={class:"content container"},$e={class:"content__top"},Ve={class:"breadcrumbs"},Te={class:"breadcrumbs__item"},xe={class:"breadcrumbs__item"},Le=(0,o._)("h1",{class:"content__title"},"Корзина",-1),Fe={key:0,class:"content__info"},Ke={key:0,class:"loader"},We={key:1,class:"cart"},Ze={class:"cart__form form",action:"#",method:"POST"},Ee={class:"cart__field"},Me={class:"cart__list"},Oe={class:"cart__block"},Se=(0,o._)("p",{class:"cart__desc"}," Мы посчитаем стоимость доставки на следующем этапе ",-1),je={class:"cart__price"};function qe(t,e,a,r,s,l){const c=(0,o.up)("router-link"),i=(0,o.up)("CartItem");return(0,o.wg)(),(0,o.iD)("main",Ue,[(0,o._)("div",$e,[(0,o._)("ul",Ve,[(0,o._)("li",Te,[(0,o.Wm)(c,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" Каталог ")])),_:1})]),(0,o._)("li",xe,[(0,o.Wm)(c,{class:"breadcrumbs__link",to:{name:"cart"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" Корзина ")])),_:1})])]),Le,t.$store.state.cartProductsLoading?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("span",Fe,(0,_.zw)(t.products.length)+" товара ",1))]),t.$store.state.cartProductsLoading?((0,o.wg)(),(0,o.iD)("div",Ke," Загрузка товаров... ")):((0,o.wg)(),(0,o.iD)("section",We,[(0,o._)("form",Ze,[(0,o._)("div",Ee,[(0,o._)("ul",Me,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.products,(t=>((0,o.wg)(),(0,o.j4)(i,{key:t.productId,item:t},null,8,["item"])))),128))])]),(0,o._)("div",Oe,[Se,(0,o._)("p",je,[(0,o.Uk)(" Итого: "),(0,o._)("span",null,(0,_.zw)(l.formatProductPrice(t.totalPrice))+" ₽",1)]),t.products.length?((0,o.wg)(),(0,o.j4)(c,{key:0,class:"cart__button button button--primery",type:"submit",to:{name:"order"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" Оформить заказ ")])),_:1})):(0,o.kq)("",!0)])])]))])}const Be={class:"cart__item product"},Ye={class:"product__pic"},He=["src","alt"],Ge={class:"product__title"},Ne={class:"product__code"},Qe={class:"product__counter form__counter"},Re=(0,o._)("svg",{width:"10",height:"10",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"#icon-minus"})],-1),Xe=[Re],Je=(0,o._)("svg",{width:"10",height:"10",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"#icon-plus"})],-1),ta=[Je],ea={class:"product__price"},aa=(0,o._)("svg",{width:"20",height:"20",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"#icon-close"})],-1),ra=[aa];function oa(t,e,a,s,l,c){return(0,o.wg)(),(0,o.iD)("li",Be,[(0,o._)("div",Ye,[(0,o._)("img",{src:a.item.product.image,width:"120",height:"120",alt:a.item.product.title},null,8,He)]),(0,o._)("h3",Ge,(0,_.zw)(a.item.product.title),1),(0,o._)("span",Ne," Артикул: "+(0,_.zw)(a.item.productId),1),(0,o._)("div",Qe,[(0,o._)("button",{type:"button","aria-label":"Убрать один товар",onClick:e[0]||(e[0]=(0,r.iM)(((...t)=>c.decrementAmount&&c.decrementAmount(...t)),["prevent"]))},Xe),(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>c.amount=t),name:"count"},null,512),[[r.nr,c.amount,void 0,{number:!0}]]),(0,o._)("button",{type:"button","aria-label":"Добавить один товар",onClick:e[2]||(e[2]=(0,r.iM)(((...t)=>c.incrementAmount&&c.incrementAmount(...t)),["prevent"]))},ta)]),(0,o._)("b",ea,(0,_.zw)(c.formatProductPrice(a.item.amount*a.item.product.price))+" ₽ ",1),(0,o._)("button",{class:"product__del button-del",type:"button","aria-label":"Удалить товар из корзины",onClick:e[3]||(e[3]=(0,r.iM)((t=>c.deleteProduct({productId:a.item.productId})),["prevent"]))},ra)])}var sa={props:["item"],methods:{deleteProduct({productId:t}){this.deleteCartProductAmount({productId:t})},...(0,y.nv)(["deleteCartProductAmount"]),formatProductPrice(t){return _t(t)},incrementAmount(){this.amount++},decrementAmount(){1!==this.amount&&this.amount--}},computed:{amount:{get(){return this.item.amount},set(t){this.$store.dispatch("updateCartProductAmount",{productId:this.item.productId,amount:t})}}}};const la=(0,b.Z)(sa,[["render",oa]]);var ca=la,ia={components:{CartItem:ca},methods:{formatProductPrice(t){return _t(t)}},computed:{...(0,y.Se)({products:"cartDetailProducts",totalPrice:"cartTotalPrice"})}};const na=(0,b.Z)(ia,[["render",qe]]);var da=na;const ua={class:"content container"},_a={class:"content__top"},pa={class:"breadcrumbs"},ma={class:"breadcrumbs__item"},ha={class:"breadcrumbs__item"},fa={class:"breadcrumbs__item"},ga=(0,o._)("h1",{class:"content__title"},"Корзина",-1),ba={class:"content__info"},va={class:"cart"},ka={class:"cart__field"},ya={class:"cart__data"},Pa={class:"cart__options"},wa=(0,o._)("h3",{class:"cart__title"},"Доставка",-1),Da={class:"cart__options options"},Ca=(0,o._)("span",{class:"options__value"},[(0,o.Uk)(" Самовывоз "),(0,o._)("b",null,"бесплатно")],-1),Ia=(0,o._)("span",{class:"options__value"},[(0,o.Uk)(" Курьером "),(0,o._)("b",null,"500 ₽")],-1),Aa=(0,o._)("h3",{class:"cart__title"},"Оплата",-1),za={class:"cart__options options"},Ua=(0,o._)("span",{class:"options__value"}," Картой при получении ",-1),$a=(0,o._)("span",{class:"options__value"}," Наличными при получении ",-1),Va={class:"cart__block"},Ta={class:"cart__orders"},xa={class:"cart__total"},La=["disabled"],Fa={key:0,class:"cart__error form__error-block"},Ka=(0,o._)("h4",null,"Заявка не отправлена!",-1);function Wa(t,e,a,s,l,c){const i=(0,o.up)("router-link"),n=(0,o.up)("base-form-text"),d=(0,o.up)("base-form-textarea"),u=(0,o.up)("base-form-radio");return(0,o.wg)(),(0,o.iD)("main",ua,[(0,o._)("div",_a,[(0,o._)("ul",pa,[(0,o._)("li",ma,[(0,o.Wm)(i,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" Каталог ")])),_:1})]),(0,o._)("li",ha,[(0,o.Wm)(i,{class:"breadcrumbs__link",to:{name:"cart"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" Корзина ")])),_:1})]),(0,o._)("li",fa,[(0,o.Wm)(i,{class:"breadcrumbs__link",to:{name:"order"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" Оформление заказа ")])),_:1})])]),ga,(0,o._)("span",ba,(0,_.zw)(t.products.length)+" товара ",1)]),(0,o._)("section",va,[(0,o._)("form",{class:"cart__form form",action:"#",method:"POST",onSubmit:e[9]||(e[9]=(0,r.iM)(((...t)=>c.order&&c.order(...t)),["prevent"]))},[(0,o._)("div",ka,[(0,o._)("div",ya,[(0,o.Wm)(n,{title:"ФИО",error:l.formError.name,modelValue:l.formData.name,"onUpdate:modelValue":e[0]||(e[0]=t=>l.formData.name=t),placeholder:"Введите ваше полное имя"},null,8,["error","modelValue"]),(0,o.Wm)(n,{title:"Адрес доставки",error:l.formError.address,modelValue:l.formData.address,"onUpdate:modelValue":e[1]||(e[1]=t=>l.formData.address=t),placeholder:"Введите ваш адрес"},null,8,["error","modelValue"]),(0,o.Wm)(n,{title:"Телефон",error:l.formError.phone,modelValue:l.formData.phone,"onUpdate:modelValue":e[2]||(e[2]=t=>l.formData.phone=t),placeholder:"Введите ваш телефон"},null,8,["error","modelValue"]),(0,o.Wm)(n,{title:"Email",error:l.formError.email,modelValue:l.formData.email,"onUpdate:modelValue":e[3]||(e[3]=t=>l.formData.email=t),placeholder:"Введите ваш Email"},null,8,["error","modelValue"]),(0,o.Wm)(d,{title:"Комментарий к заказу",error:l.formError.comment,modelValue:l.formData.comment,"onUpdate:modelValue":e[4]||(e[4]=t=>l.formData.comment=t),placeholder:"Ваши пожелания"},null,8,["error","modelValue"])]),(0,o._)("div",Pa,[wa,(0,o._)("ul",Da,[(0,o.Wm)(u,{modelValue:l.formData.delivery,"onUpdate:modelValue":e[5]||(e[5]=t=>l.formData.delivery=t),value:"0"},{default:(0,o.w5)((()=>[Ca])),_:1},8,["modelValue"]),(0,o.Wm)(u,{modelValue:l.formData.delivery,"onUpdate:modelValue":e[6]||(e[6]=t=>l.formData.delivery=t),value:"500"},{default:(0,o.w5)((()=>[Ia])),_:1},8,["modelValue"])]),Aa,(0,o._)("ul",za,[(0,o.Wm)(u,{modelValue:l.formData.pay,"onUpdate:modelValue":e[7]||(e[7]=t=>l.formData.pay=t),value:"card"},{default:(0,o.w5)((()=>[Ua])),_:1},8,["modelValue"]),(0,o.Wm)(u,{modelValue:l.formData.pay,"onUpdate:modelValue":e[8]||(e[8]=t=>l.formData.pay=t),value:"cash"},{default:(0,o.w5)((()=>[$a])),_:1},8,["modelValue"])])])]),(0,o._)("div",Va,[(0,o._)("ul",Ta,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.products,(t=>((0,o.wg)(),(0,o.iD)("li",{class:"cart__order",key:t.id},[(0,o._)("h3",null,(0,_.zw)(t.product.title),1),(0,o._)("b",null,(0,_.zw)(c.formatPrice(t.product.price))+" ₽ x "+(0,_.zw)(t.amount)+" шт",1),(0,o._)("span",null,"Артикул: "+(0,_.zw)(t.productId),1)])))),128))]),(0,o._)("div",xa,[(0,o._)("p",null,[(0,o.Uk)(" Доставка: "),(0,o._)("b",null,(0,_.zw)(l.formData.delivery)+" ₽",1)]),(0,o._)("p",null,[(0,o.Uk)(" Итого: "),(0,o._)("b",null,(0,_.zw)(t.products.length),1),(0,o.Uk)(" товара на сумму "),(0,o._)("b",null,(0,_.zw)(c.formatPrice(t.totalPrice))+" ₽",1)])]),(0,o._)("button",{class:"cart__button button button--primery",type:"submit",disabled:l.formPostLoading}," Оформить заказ ",8,La),(0,o.wy)((0,o._)("div",null,"Отправляем заказ...",512),[[r.F8,l.formPostLoading]])]),l.formErrorMessage?((0,o.wg)(),(0,o.iD)("div",Fa,[Ka,(0,o._)("p",null,(0,_.zw)(l.formErrorMessage),1)])):(0,o.kq)("",!0)],32)])])}a(7658);const Za=["type","placeholder"];function Ea(t,e,a,s,l,c){const i=(0,o.up)("base-form-field");return(0,o.wg)(),(0,o.j4)(i,{title:t.title,error:t.error},{default:(0,o.w5)((()=>[(0,o.wy)((0,o._)("input",{class:"form__input",type:a.type,placeholder:t.placeholder,"onUpdate:modelValue":e[0]||(e[0]=e=>t.dataValue=e)},null,8,Za),[[r.YZ,t.dataValue]])])),_:1},8,["title","error"])}const Ma={class:"form__label"},Oa={class:"form__value"},Sa={key:0,class:"form__error"};function ja(t,e,a,r,s,l){return(0,o.wg)(),(0,o.iD)("label",Ma,[(0,o.WI)(t.$slots,"default"),(0,o._)("span",Oa,(0,_.zw)(a.title),1),a.error?((0,o.wg)(),(0,o.iD)("span",Sa,(0,_.zw)(a.error),1)):(0,o.kq)("",!0)])}var qa={props:["title","error"]};const Ba=(0,b.Z)(qa,[["render",ja]]);var Ya=Ba,Ha={components:{BaseFormField:Ya},props:["title","error","placeholder","modelValue"],computed:{dataValue:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}}},Ga={props:{type:{default:"text"}},mixins:[Ha]};const Na=(0,b.Z)(Ga,[["render",Ea]]);var Qa=Na;const Ra=["placeholder"];function Xa(t,e,a,s,l,c){const i=(0,o.up)("base-form-field");return(0,o.wg)(),(0,o.j4)(i,{title:t.title,error:t.error},{default:(0,o.w5)((()=>[(0,o.wy)((0,o._)("textarea",{class:"form__input form__input--area",placeholder:t.placeholder,"onUpdate:modelValue":e[0]||(e[0]=e=>t.dataValue=e)},null,8,Ra),[[r.nr,t.dataValue]])])),_:1},8,["title","error"])}var Ja={mixins:[Ha]};const tr=(0,b.Z)(Ja,[["render",Xa]]);var er=tr;const ar={class:"options__item"},rr={class:"options__label"},or=["value"];function sr(t,e,a,s,l,c){return(0,o.wg)(),(0,o.iD)("li",ar,[(0,o._)("label",rr,[(0,o.wy)((0,o._)("input",{class:"options__radio sr-only",type:"radio",value:a.value,"onUpdate:modelValue":e[0]||(e[0]=t=>c.dataValue=t)},null,8,or),[[r.G2,c.dataValue]]),(0,o.WI)(t.$slots,"default")])])}var lr={props:["value","modelValue"],computed:{dataValue:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}}};const cr=(0,b.Z)(lr,[["render",sr]]);var ir=cr,nr={data(){return{formData:{pay:"card",delivery:0},formError:{},formErrorMessage:"",formPostLoading:!1}},components:{BaseFormText:Qa,BaseFormTextarea:er,BaseFormRadio:ir},computed:{...(0,y.Se)({products:"cartDetailProducts",totalPrice:"cartTotalPrice"})},methods:{formatPrice(t){return _t(t)},order(){this.formError={},this.formErrorMessage="",this.formPostLoading=!0,pt.Z.post(`${ht}/api/orders`,{name:this.formData.name,address:this.formData.address,phone:this.formData.phone,email:this.formData.email,comment:this.formData.comment},{params:{userAccessKey:this.$store.state.userAccessKey}}).then((t=>{this.formPostLoading=!1,this.$store.commit("resetCart"),this.$store.commit("updateOrderInfo",t.data),this.$router.push({name:"orderInfo",params:{id:t.data.id}})})).catch((t=>{this.formError=t.response.data.error.request||{},this.formErrorMessage=t.response.data.error.message,this.formPostLoading=!1}))}}};const dr=(0,b.Z)(nr,[["render",Wa]]);var ur=dr;const _r={class:"content container"},pr={class:"content__top"},mr={class:"breadcrumbs"},hr={class:"breadcrumbs__item"},fr={class:"breadcrumbs__item"},gr={class:"breadcrumbs__item"},br={class:"content__title"},vr={class:"cart"},kr={class:"cart__form form",action:"#",method:"POST"},yr={class:"cart__field"},Pr=(0,o._)("p",{class:"cart__message"}," Благодарим за выбор нашего магазина. На Вашу почту придет письмо с деталями заказа. Наши менеджеры свяжутся с Вами в течение часа для уточнения деталей доставки. ",-1),wr={class:"dictionary"},Dr={class:"dictionary__item"},Cr=(0,o._)("span",{class:"dictionary__key"}," Получатель ",-1),Ir={class:"dictionary__value"},Ar={class:"dictionary__item"},zr=(0,o._)("span",{class:"dictionary__key"}," Адрес доставки ",-1),Ur={class:"dictionary__value"},$r={class:"dictionary__item"},Vr=(0,o._)("span",{class:"dictionary__key"}," Телефон ",-1),Tr={class:"dictionary__value"},xr={class:"dictionary__item"},Lr=(0,o._)("span",{class:"dictionary__key"}," Email ",-1),Fr={class:"dictionary__value"},Kr=(0,o._)("li",{class:"dictionary__item"},[(0,o._)("span",{class:"dictionary__key"}," Способ оплаты "),(0,o._)("span",{class:"dictionary__value"}," картой при получении ")],-1),Wr={class:"cart__block"},Zr={class:"cart__orders"},Er={class:"cart__total"},Mr=(0,o._)("p",null,[(0,o.Uk)("Доставка: "),(0,o._)("b",null,"500 ₽")],-1);function Or(t,e,a,r,s,l){const c=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("main",_r,[(0,o._)("div",pr,[(0,o._)("ul",mr,[(0,o._)("li",hr,[(0,o.Wm)(c,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" Каталог ")])),_:1})]),(0,o._)("li",fr,[(0,o.Wm)(c,{class:"breadcrumbs__link",to:{name:"cart"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" Корзина ")])),_:1})]),(0,o._)("li",gr,[(0,o.Wm)(c,{class:"breadcrumbs__link",to:{name:"orderInfo",params:{id:t.$route.params.id}}},{default:(0,o.w5)((()=>[(0,o.Uk)(" Оформление заказа ")])),_:1},8,["to"])])]),(0,o._)("h1",br,[(0,o.Uk)(" Заказ оформлен "),(0,o._)("span",null,"№ "+(0,_.zw)(t.$store.state.orderInfo?.id),1)])]),(0,o._)("section",vr,[(0,o._)("form",kr,[(0,o._)("div",yr,[Pr,(0,o._)("ul",wr,[(0,o._)("li",Dr,[Cr,(0,o._)("span",Ir,(0,_.zw)(t.$store.state.orderInfo?.name),1)]),(0,o._)("li",Ar,[zr,(0,o._)("span",Ur,(0,_.zw)(t.$store.state.orderInfo?.address),1)]),(0,o._)("li",$r,[Vr,(0,o._)("span",Tr,(0,_.zw)(t.$store.state.orderInfo?.phone),1)]),(0,o._)("li",xr,[Lr,(0,o._)("span",Fr,(0,_.zw)(t.$store.state.orderInfo?.email),1)]),Kr])]),(0,o._)("div",Wr,[(0,o._)("ul",Zr,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.$store.state.orderInfo?.basket.items,(t=>((0,o.wg)(),(0,o.iD)("li",{class:"cart__order",key:t.id},[(0,o._)("h3",null,(0,_.zw)(t.product.title),1),(0,o._)("b",null,(0,_.zw)(l.formatProductPrice(t.product.price))+" ₽ x "+(0,_.zw)(t.quantity)+" шт",1),(0,o._)("span",null,"Артикул: "+(0,_.zw)(t.product.id),1)])))),128))]),(0,o._)("div",Er,[Mr,(0,o._)("p",null,[(0,o.Uk)(" Итого: "),(0,o._)("b",null,(0,_.zw)(t.$store.state.orderInfo?.basket.items.length),1),(0,o.Uk)(" товара на сумму "),(0,o._)("b",null,(0,_.zw)(l.formatProductPrice(t.$store.state.orderInfo?.totalPrice))+" ₽",1)])])])])])])}var Sr={methods:{formatProductPrice(t){return _t(t)}},created(){this.$store.state.orderInfo&&this.$store.state.orderInfo.id===this.$route.params.id||this.$store.dispatch("loadOrderInfo",{orderId:this.$route.params.id})}};const jr=(0,b.Z)(Sr,[["render",Or]]);var qr=jr;const Br=[{path:"/",name:"main",component:ze},{path:"/product/:id",name:"product",component:bt},{path:"/cart",name:"cart",component:da},{path:"/order/:id",name:"orderInfo",component:qr},{path:"/order",name:"order",component:ur},{path:"/:catchAll(.*)",name:"notFound",component:U}],Yr=(0,C.p7)({base:"/vue-app/",history:(0,C.PO)("/vue-app/"),routes:Br});var Hr=Yr;const Gr=(0,y.MT)({state:{userAccessKey:null,cartProductsData:[],cartProductsLoading:!1,cartProducts:[],orderInfo:null},mutations:{updateOrderInfo(t,{orderInfo:e}){t.orderInfo=e},resetCart(t){t.cartProductsData=[],t.cartProducts=[]},updateCartProductAmount(t,{productId:e,amount:a}){const r=t.cartProducts.find((t=>t.productId===e));r&&(r.amount=a)},updateUserAccessKey(t,{accessKey:e}){t.userAccessKey=e},updateCartProductsData(t,{productsData:e}){t.cartProductsData=e},updateCartProductsLoading(t,{loading:e}){t.cartProductsLoading=e},syncCartProducts(t){t.cartProducts=t.cartProductsData.map((t=>({productId:t.product.id,amount:t.quantity})))}},getters:{cartDetailProducts(t){return t.cartProducts.map((e=>{const a=t.cartProductsData.find((t=>t.product.id===e.productId)).product;return{...e,product:{...a,image:a.image.file.url}}}))},cartTotalPrice(t,e){return e.cartDetailProducts.reduce(((t,e)=>t+e.amount*e.product.price),0)}},actions:{loadOrderInfo(t,{orderId:e}){return pt.Z.get(`${ht}/api/orders/${e}`,{params:{userAccessKey:t.state.userAccessKey}}).then((e=>{t.commit("updateOrderInfo",{orderInfo:e.data})}))},loadCart(t){return t.commit("updateCartProductsLoading",{loading:!0}),pt.Z.get(`${ht}/api/baskets`,{params:{userAccessKey:t.state.userAccessKey}}).then((e=>{t.state.userAccessKey||(localStorage.setItem("userAccessKey",e.data.user.accessKey),t.commit("updateUserAccessKey",{accessKey:e.data.user.accessKey})),t.commit("updateCartProductsData",{productsData:e.data.items}),t.commit("syncCartProducts")})).then((()=>{t.commit("updateCartProductsLoading",{loading:!1})}))},addProductToCart(t,{productId:e,amount:a}){return pt.Z.post(`${ht}/api/baskets/products`,{productId:e,quantity:a},{params:{userAccessKey:t.state.userAccessKey}}).then((e=>{t.commit("updateCartProductsData",{productsData:e.data.items}),t.commit("syncCartProducts")}))},updateCartProductAmount(t,{productId:e,amount:a}){return t.commit("updateCartProductAmount",{productId:e,amount:a}),a<1?null:pt.Z.put(`${ht}/api/baskets/products`,{productId:e,quantity:a},{params:{userAccessKey:t.state.userAccessKey}}).then((e=>{t.commit("updateCartProductsData",{productsData:e.data.items})})).catch((()=>{t.commit("syncCartProducts")}))},deleteCartProductAmount(t,{productId:e}){return pt.Z["delete"](`${ht}/api/baskets/products`,{params:{userAccessKey:t.state.userAccessKey},data:{productId:e}}).then((e=>{t.commit("updateCartProductsData",{productsData:e.data.items}),t.commit("syncCartProducts")}))}}});var Nr=Gr;(0,r.ri)(D).use(Hr).use(Nr).mount("#app")}},e={};function a(r){var o=e[r];if(void 0!==o)return o.exports;var s=e[r]={exports:{}};return t[r](s,s.exports,a),s.exports}a.m=t,function(){var t=[];a.O=function(e,r,o,s){if(!r){var l=1/0;for(d=0;d<t.length;d++){r=t[d][0],o=t[d][1],s=t[d][2];for(var c=!0,i=0;i<r.length;i++)(!1&s||l>=s)&&Object.keys(a.O).every((function(t){return a.O[t](r[i])}))?r.splice(i--,1):(c=!1,s<l&&(l=s));if(c){t.splice(d--,1);var n=o();void 0!==n&&(e=n)}}return e}s=s||0;for(var d=t.length;d>0&&t[d-1][2]>s;d--)t[d]=t[d-1];t[d]=[r,o,s]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var r in e)a.o(e,r)&&!a.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,r){var o,s,l=r[0],c=r[1],i=r[2],n=0;if(l.some((function(e){return 0!==t[e]}))){for(o in c)a.o(c,o)&&(a.m[o]=c[o]);if(i)var d=i(a)}for(e&&e(r);n<l.length;n++)s=l[n],a.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return a.O(d)},r=self["webpackChunkshopapp"]=self["webpackChunkshopapp"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(1017)}));r=a.O(r)})();
//# sourceMappingURL=app.aeb31959.js.map